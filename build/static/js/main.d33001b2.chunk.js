(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var r=t(1),u=t.n(r),o=t(15),a=t.n(o),c=t(3),i=t(0),l=function(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:"Filter show with"}),Object(i.jsx)("input",{value:e.search,onChange:e.handle})]})},s=function(e){return Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange})," ",Object(i.jsx)("br",{}),"phone: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handlePhoneChange})," ",Object(i.jsx)("br",{}),Object(i.jsx)("button",{type:"submit",children:"Add"})]})},d=function(e){return Object(i.jsx)("ul",{children:e.filter().map((function(n){return Object(i.jsxs)("li",{children:[n.name," : ",n.number,Object(i.jsx)("button",{type:"button",name:n.name,value:n.id,onClick:e.handleDelete,children:"delete"})]},n.name)}))})},h=t(4),b=t.n(h),j="/api/persons",f=function(){return b.a.get(j).then((function(e){return e.data}))},m=function(e){return b.a.post(j,e).then((function(e){return e.data}))},O=function(e){return b.a.delete(j+"/"+e).then((function(e){return e.data}))},p=function(e,n){return b.a.put(j+"/"+e,n).then((function(e){return e.data}))},x=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:20},children:n})},g=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(r.useState)("New name..."),a=Object(c.a)(o,2),h=a[0],b=a[1],j=Object(r.useState)("New Number"),g=Object(c.a)(j,2),w=g[0],v=g[1],C=Object(r.useState)(""),S=Object(c.a)(C,2),N=S[0],k=S[1],y=Object(r.useState)(null),D=Object(c.a)(y,2),L=D[0],P=D[1];Object(r.useEffect)((function(){f().then((function(e){u(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(x,{message:L}),Object(i.jsx)(l,{search:N,handle:function(e){k(e.target.value)}}),Object(i.jsx)("h2",{children:"Add a new contact"}),Object(i.jsx)(s,{newName:h,newNumber:w,onSubmit:function(e){e.preventDefault();var n={name:h,number:w};if(t.some((function(e){return e.name.toLowerCase()===h.toLowerCase()}))){var r=window.confirm(h+" is already on the phonebook, do you want to replace the phone number?"),o=t.filter((function(e){return e.name===h}))[0].id;r&&p(o,n).then((function(e){u(t.map((function(n){return n.id===e.id?e:n}))),b(""),v("")})).then((function(){P(h+" phone updated"),setTimeout((function(){return P(null)}),5e3)}))}else m(n).then((function(e){u(t.concat(e)),b(""),v("")})).then((function(){P(n.name+" added to the phonebook"),setTimeout((function(){return P(null)}),5e3)}))},handleNameChange:function(e){b(e.target.value)},handlePhoneChange:function(e){v(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{filter:function(){return t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}))},handleDelete:function(e){var n=e.target.value;window.confirm("Delete "+e.target.name+"?")&&(O(n).then((function(){P(e.target.name+" deleted"),setTimeout((function(){return P(null)}),5e3)})).catch((function(e){P("Error. Phone number has already been deleted"),setTimeout((function(){return P(null)}),5e3)})),u(t.filter((function(e){return e.id!=n}))))}})]})};a.a.render(Object(i.jsx)(u.a.StrictMode,{children:Object(i.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d33001b2.chunk.js.map